{\catcode`\/=13\gdef\activeSlash{\catcode`\/=13\def/##1/{\keyword{##1}}}}

\def\keyword#1{%
  \expandafter\ifx\csname#1\endcsname\relax
    \mathsf{#1}%
  \else
    \csname#1\endcsname
  \fi
}

\def\IF{\mathsf{if}\,}
\def\THEN{\,\mathsf{then}\,}
\def\ELSE{\,\mathsf{else}\,}

\def\SUM{\mathsf{sum}\;}

\def\WHEN{\mathrm{when}\;}
\def\AND{\;\mathrm{and}\;}

\def\succ{\mathsf{succ}}

\newenvironment{code}
  {\activeSlash\[\begin{array}{r@{\,}l@{\,}l}\ignorespaces}
  {\end{array}\]\ignorespacesafterend}
